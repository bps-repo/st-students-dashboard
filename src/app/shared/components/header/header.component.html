<header
  class="flex justify-between items-center bg-gradient-to-r from-primary-600 to-primary-500 text-white shadow-lg z-10 px-8 py-4 text-[16px] font-heading"
>
  <!-- Left side navigation -->
  <nav class="flex items-center space-x-6">
    <!-- Back button (hidden on home page) -->
    <button
      *ngIf="!isHomePage"
      (click)="goBack()"
      class="group flex items-center space-x-2 bg-white bg-opacity-10 hover:bg-opacity-20 px-4 py-2 rounded-lg transition-all duration-200 shadow-sm">
      <i class="pi pi-arrow-left text-white"></i>
      <span class="font-medium">Voltar</span>
    </button>

    <!-- Breadcrumb navigation with improved styling -->
    <app-breadcrumb></app-breadcrumb>
  </nav>

  <!-- Right side user controls -->
  <div class="flex items-center space-x-6">
    <!-- Notifications icon with badge and tooltip -->
    <a
      routerLink="/notifications"
      class="relative flex items-center justify-center bg-white bg-opacity-10 hover:bg-opacity-20 p-3 rounded-full cursor-pointer transition-all duration-200 shadow-sm group"
      [title]="(unreadCount$ | async) ? ((unreadCount$ | async) === 1 ? '1 notificação não lida' : (unreadCount$ | async) + ' notificações não lidas') : 'Nenhuma notificação não lida'"
    >
      <i class="pi pi-bell text-white text-lg"></i>
      <ng-container *ngIf="(unreadCount$ | async) ?? 0 > 0">
        <span
          class="absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center"
        >
          {{ (unreadCount$ | async) ?? 0 }}
        </span>
      </ng-container>
      <!-- Tooltip -->
      <div
        class="absolute bottom-full right-0 mb-2 px-3 py-2 bg-neutral-800 text-white text-sm rounded-lg shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50"
      >
        <ng-container *ngIf="(unreadCount$ | async) ?? 0 > 0">
          {{ (unreadCount$ | async) === 1 ? '1 notificação não lida' : (unreadCount$ | async) + ' notificações não lidas' }}
        </ng-container>
        <ng-container *ngIf="(unreadCount$ | async) ?? 0 === 0">
          Nenhuma notificação não lida
        </ng-container>
        <!-- Tooltip arrow -->
        <div class="absolute top-full right-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-neutral-800"></div>
      </div>
    </a>

    <!-- User profile with improved styling -->
    <div
      (click)="toggleOverlay()"
      class="flex items-center space-x-3 bg-white bg-opacity-10 hover:bg-opacity-20 px-4 py-2 rounded-lg cursor-pointer transition-all duration-200 shadow-sm relative"
    >
      <img
        src="/user.png"
        class="w-8 h-8 rounded-full border-2 border-white border-opacity-30 object-cover"
        alt="user-photo"
      />
      <span class="font-medium">{{ (studen$ | async)?.user?.firstname }}</span>
      <i class="pi pi-chevron-down text-sm"></i>

      <!-- Overlay for user menu -->
      @if (showOverlay$|async) {
        <div
          class="fixed inset-0 backdrop-blur-sm transition-all bg-black bg-opacity-50 z-50"
        ></div>
        <app-overlay></app-overlay>
      }
    </div>

    <!-- Sign out button with improved styling -->
    <a (click)="onLogout()"
       class="flex items-center justify-center bg-white bg-opacity-10 hover:bg-opacity-20 p-3 rounded-full cursor-pointer transition-all duration-200 shadow-sm">
      <i class="pi pi-sign-out text-white"></i>
    </a>
  </div>
</header>
